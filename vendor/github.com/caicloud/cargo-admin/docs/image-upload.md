# Image Upload

Image upload helps users to upload images via Tarballs. TAR files are generated by `docker save` commands, multiple images may be included in one TAR file.

When users upload images, `registry` and `project` must be specified. Cargo-Admin will then load images from the uploaded file, and tag images to use the given `registry` and `project`. If the origin image name in the TAR file already contains domain and project information, they will be overridden. 

## API

```
POST /registries/{registry}/projects/{project}/uploads
```

_Request_

TAR file as request body with Content-Type: application/octet-stream

_Response_

```json
{
    "succeed": [
        "cargo.caicloudprivatetest.com/caicloud/busybox:latest",
        "cargo.caicloudprivatetest.com/caicloud/cargo-busybox:v1.0",
        "cargo.caicloudprivatetest.com/caicloud/cargo-nginx:v1.0"
    ],
    "failed": []
}
```

## Future Work

#### Resolve Conflict

There maybe conflict in local docker. Suppose two users upload images with the same tag to different registries. Both images would be loaded in to local docker of Cargo-Admin. Then there would be conflict between these two images, more concern lies in the remove of images from local docker.

